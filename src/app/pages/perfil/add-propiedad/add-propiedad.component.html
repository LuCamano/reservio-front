<app-header-simple></app-header-simple>

<div class="max-w-3xl mx-auto bg-white shadow-md p-6 rounded-2xl border border-gray-200 mt-6">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">Agregar Propiedad</h2>

    <form [formGroup]="localForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">Nombre</label>
                <input type="text" formControlName="nombre" class="w-full border border-gray-300 p-2 rounded-lg" />
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Región</label>
                <select formControlName="region" class="w-full border border-gray-300 p-2 rounded-lg">
                    <option value="">Seleccione Región</option>
                    <option *ngFor="let reg of regiones" [value]="reg">{{ reg }}</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Comuna</label>
                <select formControlName="comuna" class="w-full border border-gray-300 p-2 rounded-lg">
                    <option value="">Seleccione Comuna</option>
                    <option *ngFor="let com of comunasFiltradas" [value]="com">{{ com }}</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Capacidad</label>
                <input type="number" formControlName="capacidad" class="w-full border border-gray-300 p-2 rounded-lg" />
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Precio por hora</label>
                <input type="number" formControlName="precioH" class="w-full border border-gray-300 p-2 rounded-lg" />
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Dirección (opcional)</label>
                <input type="text" formControlName="direccion" class="w-full border border-gray-300 p-2 rounded-lg" />
            </div>

            <div>
                <label for="disponible" class="block text-sm font-medium text-gray-700 mb-1">Disponible</label>

                <label for="disponible" class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="disponible" formControlName="disponible" class="sr-only peer" />

                    <!-- fondo del switch -->
                    <div class="w-11 h-6 bg-gray-300 rounded-full peer peer-checked:bg-blue-600 transition-colors">
                    </div>

                    <!-- círculo del switch -->
                    <div
                        class="absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full transition-transform peer-checked:translate-x-full">
                    </div>
                </label>
            </div>

            <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700">Imagen</label>
                <input type="text" placeholder="URL de la imagen" formControlName="imagenUrl"
                    class="w-full border border-gray-300 p-2 rounded-lg" />
            </div>

            <!-- NUEVO: Campo Descripción -->
            <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700">Descripción</label>
                <textarea formControlName="descripcion" rows="3"
                    class="w-full border border-gray-300 p-2 rounded-lg resize-none"></textarea>
            </div>
        </div>

        <div class="sm:col-span-2 flex items-center justify-between pt-6">
            <button type="button" (click)="onCancel()" routerLink="/perfil"
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">
                Cancelar
            </button>
            
            <button type="submit" [disabled]="localForm.invalid"
                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition shadow-md">
                Guardar Propiedad
            </button>
        </div>
    </form>
    
</div>